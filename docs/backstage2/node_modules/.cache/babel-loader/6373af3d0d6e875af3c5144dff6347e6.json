{"remainingRequest":"E:\\实训\\backstage2\\node_modules\\babel-loader\\lib\\index.js!E:\\实训\\backstage2\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\实训\\backstage2\\src\\http\\request.js","dependencies":[{"path":"E:\\实训\\backstage2\\src\\http\\request.js","mtime":1591883462959},{"path":"E:\\实训\\backstage2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\实训\\backstage2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\实训\\backstage2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CgovKiBlc2xpbnQtZGlzYWJsZSBxdW90ZXMgKi8KCi8qIGVzbGludC1kaXNhYmxlIGRvdC1ub3RhdGlvbiAqLwoKLyogZXNsaW50LWRpc2FibGUgY29tcHV0ZWQtcHJvcGVydHktc3BhY2luZyAqLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly93d3cubGl1bG9uZ2Jpbi50b3A6ODg4OC9hcGkvcHJpdmF0ZS92MScsCiAgdGltZW91dDogMzAwMAp9KTsgLy8g6K+35rGC5oum5oiqCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5sb2coJ+ivt+axguiiq+aLpuaIqicpOyAvLyDlrZh0b2tlbgoKICBpZiAoY29uZmlnICE9PSAnbG9naW4nKSB7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgIGNvbnNvbGUubG9nKHRva2VuKTsKICAgIGNvbmZpZy5oZWFkZXJzWyJBdXRob3JpemF0aW9uIl0gPSB0b2tlbjsKICAgIGNvbnNvbGUubG9nKGNvbmZpZyk7CiAgfSAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0VG9rZW4nLCB0b2tlbikKCgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChfZXJyb3IpIHsKICBjb25zb2xlLmxvZyhfZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXByb21pc2UtcmVqZWN0LWVycm9ycwoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+ivt+axguWHuumUmScpOwp9KTsgLy8g5ZON5bqU5oum5oiqCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsgLy8gY29uc29sZS5sb2codGhpcy5ydWxlRm9ybSkKCiAgY29uc29sZS5sb2cocmVzKTsKICB2YXIgX3JlcyRkYXRhJG1ldGEgPSByZXMuZGF0YS5tZXRhLAogICAgICBtc2cgPSBfcmVzJGRhdGEkbWV0YS5tc2csCiAgICAgIHN0YXR1cyA9IF9yZXMkZGF0YSRtZXRhLnN0YXR1czsKICBjb25zb2xlLmxvZyhtc2csIHN0YXR1cyk7CgogIGlmIChzdGF0dXMgPT09IDQwMCkgewogICAgTWVzc2FnZS5lcnJvcihtc2cpOwogICAgUHJvbWlzZS5yZWplY3QobXNnKTsKICB9CgogIGlmIChzdGF0dXMgPT09IDIwMCkgewogICAgdmFyIHRva2VuID0gcmVzLmRhdGEuZGF0YS50b2tlbjsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicpOyAvLyDnmbvlvZXmiJDlip/mj5DnpLoKCiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogbXNnLAogICAgICB0eXBlOiAnc3VjY2VzcycKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgZmxhZzogMSwKICAgICAgcmVzOiByZXMKICAgIH07CiAgfSBlbHNlIHsKICAgIE1lc3NhZ2UuZXJyb3IobXNnKTsKICAgIHJldHVybiB7CiAgICAgIGZsYWc6IDIsCiAgICAgIG1zZzogbXNnLAogICAgICByZXN1bHQ6IHJlcwogICAgfTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcHJvbWlzZS1yZWplY3QtZXJyb3JzCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KCflk43lupTlh7rplJknLCBlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["E:/实训/backstage2/src/http/request.js"],"names":["axios","Message","service","create","baseURL","timeout","interceptors","request","use","config","console","log","token","localStorage","getItem","headers","_error","Promise","reject","response","res","data","meta","msg","status","error","setItem","message","type","flag","result"],"mappings":";;AAAA;;AACA;;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AAEA,IAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAE,gDADkB;AAE3BC,EAAAA,OAAO,EAAE;AAFkB,CAAb,CAAhB,C,CAKA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzCC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EADyC,CAEzC;;AAEA,MAAIF,MAAM,KAAK,OAAf,EAAwB;AACtB,QAAMG,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACAH,IAAAA,MAAM,CAACM,OAAP,CAAe,eAAf,IAAkCH,KAAlC;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACD,GATwC,CAUzC;;;AACA,SAAOA,MAAP;AACD,CAZD,EAYG,UAAAO,MAAM,EAAI;AACXN,EAAAA,OAAO,CAACC,GAAR,CAAYK,MAAZ,EADW,CAEX;;AACA,SAAOC,OAAO,CAACC,MAAR,CAAe,MAAf,CAAP;AACD,CAhBD,E,CAkBA;;AACAhB,OAAO,CAACI,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CAAkC,UAAAY,GAAG,EAAI;AACvCV,EAAAA,OAAO,CAACC,GAAR,CAAYS,GAAG,CAACC,IAAhB,EADuC,CAEvC;;AAEAX,EAAAA,OAAO,CAACC,GAAR,CAAYS,GAAZ;AAJuC,uBAKjBA,GAAG,CAACC,IAAJ,CAASC,IALQ;AAAA,MAKjCC,GALiC,kBAKjCA,GALiC;AAAA,MAK5BC,MAL4B,kBAK5BA,MAL4B;AAMvCd,EAAAA,OAAO,CAACC,GAAR,CAAYY,GAAZ,EAAiBC,MAAjB;;AAEA,MAAIA,MAAM,KAAK,GAAf,EAAoB;AAClBvB,IAAAA,OAAO,CAACwB,KAAR,CAAcF,GAAd;AACAN,IAAAA,OAAO,CAACC,MAAR,CAAeK,GAAf;AACD;;AAED,MAAIC,MAAM,KAAK,GAAf,EAAoB;AAAA,QACVZ,KADU,GACAQ,GAAG,CAACC,IAAJ,CAASA,IADT,CACVT,KADU;AAElBC,IAAAA,YAAY,CAACa,OAAb,CAAqB,OAArB,EAFkB,CAGlB;;AACAzB,IAAAA,OAAO,CAAC;AACN0B,MAAAA,OAAO,EAAEJ,GADH;AAENK,MAAAA,IAAI,EAAE;AAFA,KAAD,CAAP;AAIA,WAAO;AACLC,MAAAA,IAAI,EAAE,CADD;AAELT,MAAAA,GAAG,EAAEA;AAFA,KAAP;AAID,GAZD,MAYO;AACLnB,IAAAA,OAAO,CAACwB,KAAR,CAAcF,GAAd;AACA,WAAO;AACLM,MAAAA,IAAI,EAAE,CADD;AAELN,MAAAA,GAAG,EAAEA,GAFA;AAGLO,MAAAA,MAAM,EAAEV;AAHH,KAAP;AAKD;AACF,CAjCD,EAiCG,UAAAK,KAAK,EAAI;AACV;AACA,SAAOR,OAAO,CAACC,MAAR,CAAe,MAAf,EAAuBO,KAAvB,CAAP;AACD,CApCD;AAsCA,eAAevB,OAAf","sourcesContent":["/* eslint-disable quotes */\r\n/* eslint-disable dot-notation */\r\n/* eslint-disable computed-property-spacing */\r\nimport axios from 'axios'\r\nimport { Message } from 'element-ui'\r\n\r\nconst service = axios.create({\r\n  baseURL: 'https://www.liulongbin.top:8888/api/private/v1',\r\n  timeout: 3000\r\n})\r\n\r\n// 请求拦截\r\nservice.interceptors.request.use(config => {\r\n  console.log('请求被拦截')\r\n  // 存token\r\n\r\n  if (config !== 'login') {\r\n    const token = localStorage.getItem('token')\r\n    console.log(token)\r\n    config.headers[\"Authorization\"] = token\r\n    console.log(config)\r\n  }\r\n  // this.$store.dispatch('setToken', token)\r\n  return config\r\n}, _error => {\r\n  console.log(_error)\r\n  // eslint-disable-next-line prefer-promise-reject-errors\r\n  return Promise.reject('请求出错')\r\n})\r\n\r\n// 响应拦截\r\nservice.interceptors.response.use(res => {\r\n  console.log(res.data)\r\n  // console.log(this.ruleForm)\r\n\r\n  console.log(res)\r\n  var { msg, status } = res.data.meta\r\n  console.log(msg, status)\r\n\r\n  if (status === 400) {\r\n    Message.error(msg)\r\n    Promise.reject(msg)\r\n  }\r\n\r\n  if (status === 200) {\r\n    const { token } = res.data.data\r\n    localStorage.setItem('token')\r\n    // 登录成功提示\r\n    Message({\r\n      message: msg,\r\n      type: 'success'\r\n    })\r\n    return {\r\n      flag: 1,\r\n      res: res\r\n    }\r\n  } else {\r\n    Message.error(msg)\r\n    return {\r\n      flag: 2,\r\n      msg: msg,\r\n      result: res\r\n    }\r\n  }\r\n}, error => {\r\n  // eslint-disable-next-line prefer-promise-reject-errors\r\n  return Promise.reject('响应出错', error)\r\n})\r\n\r\nexport default service\r\n"]}]}